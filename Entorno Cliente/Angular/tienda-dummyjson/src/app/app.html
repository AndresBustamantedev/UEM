<div class="container">
  <!-- Sección Superior: Filtros -->
  <header class="filters-section animate__animated animate__fadeInDown">
    <div class="logo-container">
      <img src="logo.png" alt="Tienda DummyJSON" class="store-logo">
    </div>
    <div class="filters">
      <div class="filter-group">
        <label>Precio Mínimo:</label>
        <input type="number" [ngModel]="minPrice()" (ngModelChange)="minPrice.set($event)" min="0" placeholder="0">
      </div>
      
      <div class="filter-group">
        <label>Categoría:</label>
        <select [ngModel]="selectedCategory()" (ngModelChange)="selectedCategory.set($event)">
          <option value="">Todas</option>
          <option *ngFor="let cat of categories()" [value]="cat">{{cat}}</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Marca:</label>
        <select [ngModel]="selectedBrand()" (ngModelChange)="selectedBrand.set($event)">
          <option value="">Todas</option>
          <option *ngFor="let brand of brands()" [value]="brand">{{brand}}</option>
        </select>
      </div>

      <button (click)="applyFilters()" class="btn-filter">Aplicar Filtros</button>
    </div>
  </header>

  <!-- Sección Central -->
  <main class="main-content">
    
    <!-- Parte de Resultados -->
    <section class="results-section">
      <h2>Productos ({{filteredProducts().length}})</h2>
      <div class="products-grid">
        <div *ngFor="let product of filteredProducts()" class="product-card animate__animated animate__zoomIn">
          <img [src]="product.thumbnail" [alt]="product.title">
          <div class="card-body">
            <h3 [title]="product.title">{{product.title}}</h3>
            <p class="category">{{product.category}}</p>
            <p class="price">{{product.price}} €</p>
            <button (click)="addToCart(product)" class="btn-add">Añadir al carrito</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Parte del Carrito -->
    <aside class="cart-section animate__animated animate__fadeInRight">
      <h2>
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: bottom; margin-right: 8px;">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        Carrito ({{cart().length}})
      </h2>
      
      <div class="cart-items">
        <div *ngFor="let item of cart(); let i = index" class="cart-item animate__animated animate__slideInRight">
          <img [src]="item.thumbnail" class="cart-thumb">
          <div class="cart-details">
            <h4 [title]="item.title">{{item.title}}</h4>
            <span>{{item.price}} €</span>
          </div>
          <button (click)="removeFromCart(i)" class="btn-remove" title="Eliminar">❌</button>
        </div>
      </div>

      <div class="cart-footer" *ngIf="cart().length > 0">
        <h3>Total: {{cartTotal() | number:'1.2-2'}} €</h3>
        <button (click)="buy()" class="btn-buy">Comprar</button>
      </div>
      <p *ngIf="cart().length === 0" class="empty-cart-msg">El carrito está vacío</p>
    </aside>

  </main>
</div>
